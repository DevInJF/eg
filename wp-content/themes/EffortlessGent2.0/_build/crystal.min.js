angular.module("truncate",[]).filter("characters",function(){return function(r,t,n){if(isNaN(t))return r;if(t<=0)return"";if(r&&r.length>t){if(r=r.substring(0,t),n)for(;" "===r.charAt(r.length-1);)r=r.substr(0,r.length-1);else{var e=r.lastIndexOf(" ");e!==-1&&(r=r.substr(0,e))}return r+"…"}return r}}).filter("splitcharacters",function(){return function(r,t){if(isNaN(t))return r;if(t<=0)return"";if(r&&r.length>t){var n=r.substring(0,t/2),e=r.substring(r.length-t/2,r.length);return n+"..."+e}return r}}).filter("words",function(){return function(r,t){if(isNaN(t))return r;if(t<=0)return"";if(r){var n=r.split(/\s+/);n.length>t&&(r=n.slice(0,t).join(" ")+"…")}return r}});
(function(){"use strict";angular.module("angularSmoothscroll",[]).directive("smoothScroll",["$log","$timeout","$window",function(t,o,e){var n,r,c;return n=function(){return e.pageYOffset?e.pageYOffset:e.document.documentElement&&e.document.documentElement.scrollTop?e.document.documentElement.scrollTop:e.document.body.scrollTop?e.document.body.scrollTop:0},r=function(t){var o,e,n;if(o=document.getElementById(t)){for(n=o.offsetTop,e=o;e.offsetParent&&e.offsetParent!==document.body;)e=e.offsetParent,n+=e.offsetTop;return n}return 0},c=function(t,o){var e,c,u,l,f,i,s,d,a;if(f=n(),s=r(t)-o,e=s>f?s-f:f-s,100>e)return void scrollTo(0,s);if(l=Math.round(e/100),l>=20&&(l=20),i=Math.round(e/25),u=s>f?f+i:f-i,d=0,!(s>f)){for(c=f,a=[];c>s;)setTimeout("window.scrollTo(0, "+u+")",d*l),u-=i,s>u&&(u=s),d++,a.push(c-=i);return a}for(c=f;s>c;)setTimeout("window.scrollTo(0, "+u+")",d*l),u+=i,u>s&&(u=s),d++,c+=i},{restrict:"A",link:function(t,o,e){return o.bind("click",function(){var t;return e.target?(t=e.offset||100,c(e.target,t)):0})}}}]).directive("smoothScrollJquery",["$log",function(){return{restrict:"A",link:function(t,o,e){return o.bind("click",function(){var t,o,n;return e.target?(t=e.offset||100,n=$("#"+e.target),o=e.speed||500,$("html,body").stop().animate({scrollTop:n.offset().top-t},o)):$("html,body").stop().animate({scrollTop:0},o)})}}}])}).call(this);
function getCookie(e){for(var n=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var o=a[i];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(n))return o.substring(n.length,o.length)}return""}jQuery(document).ready(function(e){function n(){var n=e(".inner-story img").outerHeight(),a=e(".inner-story img").outerWidth();e(".story-info").css({height:n+"px"}),e(".story-info").css({width:a+"px"})}function a(){var n=0,a=[];e('.form-whats-my-liability input[type="radio"]:checked').each(function(i){var o=(e(this).attr("name"),e(this).val(),e(".form-whats-my-liability .bfElementGroupNoWrap").index(e(this).parents(".bfElementGroupNoWrap")),e(this).parents(".bfElementGroupNoWrap").find('input[type="radio"]').index(e(this)));switch(n+=e(this).data("points"),a[i]=o,a[0]){case 0:n>=8&&n<=15?(range_min=1,range_max=3):n>15&&n<=30?(range_min=3,range_max=5):n>30&&n<=42?(range_min=3,range_max=5):n>42&&n<=51?(range_min=5,range_max=10):(range_min=1,range_max=1);break;case 1:n>=8&&n<=15?(range_min=5,range_max=10):n>15&&n<=30?(range_min=5,range_max=10):n>30&&n<=42?(range_min=10,range_max=15):n>42&&n<=51?(range_min=10,range_max=15):(range_min=1,range_max=1);break;case 2:n>=8&&n<=15?(range_min=10,range_max=15):n>15&&n<=30?(range_min=10,range_max=20):n>30&&n<=42?(range_min=15,range_max=25):n>42&&n<=51?(range_min=20,range_max=30):(range_min=1,range_max=1);break;case 3:n>=8&&n<=15?(range_min=10,range_max=20):n>15&&n<=30?(range_min=20,range_max=30):n>30&&n<=42?(range_min=30,range_max=40):n>42&&n<=51?(range_min=30,range_max=50):(range_min=1,range_max=1);break;case 4:n>=8&&n<=15?(range_min=20,range_max=30):n>15&&n<=30?(range_min=30,range_max=40):n>30&&n<=42?(range_min=40,range_max=50):n>42&&n<=51?(range_min=50,range_max=100):(range_min=1,range_max=1)}}),liability_coverage="$"+range_min+"-"+range_max+" Million",document.cookie="liability_coverage="+liability_coverage+"; expires=Fri, 31 Dec 9999 23:59:59 GMT",s.find('input[name="ff_nm_liability_coverage[]"]').val(liability_coverage)}FastClick.attach(document.body),e(".full-width-bottom").each(function(){var n=e(this);n.closest(".panel-grid").addClass("full-width-ac-img")}),e("select#location-dropdown").change(function(){e(".location-row").hide(),e("."+e(this).val()).show(),"showall"==e(this).val()&&e(".location-row").show()}),window.onload=function(e){n()},window.onresize=function(e){n()},e("iframe").wrap("<div class='video-wrapper'></div>");var i=new Slideout({panel:document.getElementById("page"),menu:document.getElementById("site-navigation-mobile"),padding:256,tolerance:70,touch:!1});e("#menu-primary-menu #menu-item-544 a").click(function(){i.close()});var o=document.querySelectorAll(".parallax"),t=.5;window.onscroll=function(){[].slice.call(o).forEach(function(e,n){var a=window.pageYOffset,i="50% "+a*t+"px";e.style.backgroundPosition=i})};var r=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onCenter",offset:-250}});new ScrollMagic.Scene({triggerElement:"#experts-in"}).setClassToggle("#experts-in","in-focus").addTo(r),new ScrollMagic.Scene({triggerElement:"#block1"}).setClassToggle("#block1","in-focus").addTo(r),new ScrollMagic.Scene({triggerElement:"#professional-stories"}).setClassToggle("#professional-stories","in-focus").addTo(r),new ScrollMagic.Scene({triggerElement:"#block2"}).setClassToggle("#block2","in-focus").addTo(r),new ScrollMagic.Scene({triggerElement:"#sectors-services"}).setClassToggle("#sectors-services","in-focus").addTo(r),new ScrollMagic.Scene({triggerElement:"#contactus"}).setClassToggle("#contactus","in-focus").addTo(r),document.querySelector("button.menu-btn").addEventListener("click",function(){i.toggle()}),e(".search-btn").click(function(){e("#search-container").toggleClass("show"),e("#search-container #main-search input").focus()}),e("#search-container").on("focusout",function(){e("#search-container").removeClass("show")}),e(document).on("click",'a[href^="#"]',function(n){var a=e(this).attr("href"),i=e(a);if(0!==i.length){n.preventDefault();var o=e(a).offset().top;e("body, html").animate({scrollTop:o})}}),e("#footer-nav li a").addClass("ss-icon"),e(".navbar-toggle.mobile").on("click",function(){e("#topbar nav").slideToggle()}),e(window).width()<786&&(e("#main").click(function(){e("#topbar nav").slideUp()}),e("#topbar nav a").click(function(){e("#topbar nav").slideUp()})),e(window).scroll(function(){e(this).scrollTop()>67?e("#masthead.site-header").addClass("sticky"):e("#masthead.site-header").removeClass("sticky")});var s=e(".form-whats-my-liability"),c=[["estimated_net_worth",0,1],["estimated_net_worth",1,2],["estimated_net_worth",2,3],["estimated_net_worth",3,4],["estimated_net_worth",4,1],["homes_owned",0,1],["homes_owned",1,2],["homes_owned",2,3],["homes_owned",3,4],["automobiles_owned",0,1],["automobiles_owned",1,1],["automobiles_owned",2,2],["automobiles_owned",3,3],["recreational_vehicles_owned",0,0],["recreational_vehicles_owned",1,2],["recreational_vehicles_owned",2,3],["under_25_authorize_vehicle_use",0,3],["under_25_authorize_vehicle_use",1,0],["full_time_employees",0,0],["full_time_employees",1,2],["full_time_employees",2,3],["full_time_employees",3,4],["annual_income_exceed_1M",0,0],["annual_income_exceed_1M",1,2],["annual_income_exceed_1M",2,2],["community_affluent",0,1],["community_affluent",1,2],["community_affluent",2,3],["public_prominence",0,1],["public_prominence",1,2],["public_prominence",2,4],["additional_exposures",0,1],["additional_exposures",1,2],["additional_exposures",2,3],["social_networking",0,0],["social_networking",1,2],["social_networking",2,3],["host_parties",0,1],["host_parties",1,2],["host_parties",2,3],["host_parties",3,4],["non_profit_boards",0,0],["non_profit_boards",1,2],["non_profit_boards",2,2],["non_profit_boards",3,3],["high_risk_activities",0,1],["high_risk_activities",1,2],["high_risk_activities",2,3],["concern",0,1],["concern",1,2],["concern",2,4]];c.each(function(e,n){s.find('input[name="ff_nm_'+e[0]+'[]"]:eq('+e[1]+")").data("points",e[2])}),e(window).load(function(){s.length&&a()}),s.find("input").change(function(){a()}),e("#bfPage8").append('<span class="liability-coverage">'+getCookie("liability_coverage")+"</span>")});
!function(){"use strict";angular.module("MainApp",[]).directive("hamburger",function(){return function(n,i,c){$(i).on("click",function(){console.log("hmg click"),$("#topbar nav").slideToggle()}),$(window).width()<786&&($("#main").click(function(){$("#topbar nav").slideUp()}),$("#topbar nav a").click(function(){$("#topbar nav").slideUp()}))}})}();